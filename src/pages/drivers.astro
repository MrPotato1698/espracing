---
import Layout from "@/layouts/NormalLayout.astro";
import { turso } from "@/turso";

const { rows: UsersData } = await turso.execute(
  "SELECT DISTINCT U.name AS UserName, U.number_plate, U.races, U.wins, U.podiums, U.flaps, U.poles, U.top5, U.top10, U.dnf, T.name AS TeamName FROM User AS U INNER JOIN Team AS T ON U.team = T.id ORDER BY U.number_plate ASC"
);
---

<Layout title="ESP Racing: Pilotos">
  <div class="py-4 mx-auto text-center" style="width: 99%">
    <p2 class="text-5xl font-bold border-b border-[#da392b] w-fit mx-auto"
      >Tabla de Pilotos</p2
    >
    <table class="mt-6 w-full border-collapse border border-[#f9f9f9]">
      <thead class="font-medium bg-[#da392b]">
        <tr>
          <th>Nº</th>
          <th>Nombre</th>
          <th>Equipo</th>
          <th>Carreras</th>
          <th>Victorias</th>
          <th>Podios</th>
          <th>V. Rápidas</th>
          <th>Poles</th>
          <th>Top 5</th>
          <th>Top 10</th>
          <th>DNF</th>
        </tr>
      </thead>
      <tbody>
        {
          UsersData.map((user, index) =>
            index % 2 === 0 ? (
              <tr class="bg-[#0f0f0f]">
                <td class = "font-semibold">{index + 1}</td>
                <td>#{user.number_plate} - {user.UserName}</td>
                <td>{user.TeamName}</td>
                <td>{user.races}</td>
                <td>{user.wins}</td>
                <td>{user.podiums}</td>
                <td>{user.flaps}</td>
                <td>{user.poles}</td>
                <td>{user.top5}</td>
                <td>{user.top10}</td>
                <td>{user.dnf}</td>
              </tr>
            ) : (
              <tr class="bg-[#19191c]">
                <td class = "font-semibold">{index + 1}</td>
                <td>{user.UserName}</td>
                <td>{user.TeamName}</td>
                <td>{user.races}</td>
                <td>{user.wins}</td>
                <td>{user.podiums}</td>
                <td>{user.flaps}</td>
                <td>{user.poles}</td>
                <td>{user.top5}</td>
                <td>{user.top10}</td>
                <td>{user.dnf}</td>
              </tr>
            )
          )
        }
      </tbody>
    </table>
  </div>
</Layout>
